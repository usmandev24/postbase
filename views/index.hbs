<div class="p-4 md:p-8 list w-full m-auto bg-base-100  ">
  {{#if notelist}}
  <div id="notelist" class="p-2">
    {{#each notelist}}

    <span id={{key}} class="p-1 block">
      <a class="block p-2 hover:bg-base-300 hover:p-4 hover:shadow-lg hover:rounded-xl rounded-2xl shadow-primary shadow-md text-shadow-2xs text-center transition-all text-lg "
        href="/notes/view?key={{key}}">{{title}}</a>
    </span>

    {{/each}}
  </div>
</div>
{{else}}
<div id="notelist" class="p-2">

</div>
<div id="emptydiv">
  <h1 class=" text-2xl p-8 m-auto">No Note Added Yet.</h1>
  <p class=" m-auto w-[12rem]">
    <a class="btn btn-block btn-primary" href="/notes/add">ADD Note</a>
  </p>
</div>

{{/if}}
</div>
<script>
  const notelist = document.getElementById('notelist');
  const ws = new WebSocket("ws://localhost:3000/home");
  ws.addEventListener("message", (event) => {
    const data = JSON.parse(event.data)
    if (data.type === 'connection') {
      console.log(data.message)
    } else if (data.type === 'notecreated') {
      const span = document.createElement('span');
      const note = data.note;
      span.id = note.key;
      span.innerHTML = `
        <a class="block p-2 hover:bg-base-300 hover:p-4 hover:shadow-lg rounded-2xl shadow-primary shadow-md text-shadow-2xs text-center transition-all text-lg "
      href="/notes/view?key=${note.key}">${note.title}</a>
      `;
      notelist.appendChild(span)
    } else if (data.type === 'notedestroyed') {
      const noteSpan = document.getElementById(data.key);
      noteSpan.remove()
    }
  })
</script>